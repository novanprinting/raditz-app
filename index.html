<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RADITZ OJOL PRO - Dashboard</title>
    <style>
        :root {
            --primary: #1e88e5;
            --success: #2e7d32;
            --danger: #d32f2f;
            --bg: #f4f7f6;
        }

        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg); padding-bottom: 70px; }
        
        /* LOGIN OVERLAY */
        #loginPage { 
            position: fixed; inset: 0; background: white; z-index: 1000; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 20px;
        }

        .header { background: var(--primary); color: white; padding: 15px; text-align: center; font-weight: bold; }
        .container { padding: 15px; max-width: 500px; margin: auto; }
        .page { display: none; }
        .page.active { display: block; }
        
        .card { background: white; padding: 15px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .grid-dashboard { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        
        input, button { width: 100%; padding: 12px; margin-top: 10px; border-radius: 8px; border: 1px solid #ccc; box-sizing: border-box; }
        button { background: var(--primary); color: white; border: none; font-weight: bold; cursor: pointer; }
        
        .navbar { position: fixed; bottom: 0; width: 100%; display: flex; background: white; border-top: 1px solid #ccc; }
        .navbar button { flex: 1; background: none; color: #666; border: none; padding: 15px; }
        .navbar button.active { color: var(--primary); font-weight: bold; }

        .stat-label { font-size: 0.8rem; color: #666; }
        .stat-value { font-size: 1.1rem; font-weight: bold; display: block; }
    </style>
</head>
<body>

<div id="loginPage">
    <h2>RADITZ OJOL PRO</h2>
    <input type="text" id="userInput" placeholder="Username">
    <input type="password" id="passInput" placeholder="Password">
    <button onclick="login()">Masuk / Daftar</button>
</div>

<div id="mainApp" style="display:none">
    <div class="header" id="welcomeUser">RADITZ OJOL PRO</div>

    <div class="container">
        <div id="page0" class="page active">
            <div class="card">
                <h3>üè† Dashboard Utama</h3>
                <div class="grid-dashboard">
                    <div class="card" style="margin:0; background: #e3f2fd;">
                        <span class="stat-label">Pendapatan Hari Ini</span>
                        <span class="stat-value" id="dashHarian">Rp 0</span>
                    </div>
                    <div class="card" style="margin:0; background: #e8f5e9;">
                        <span class="stat-label">Total Tabungan</span>
                        <span class="stat-value" id="dashTabungan">Rp 0</span>
                    </div>
                </div>
                <div class="card" style="margin-top:10px; background: #fff3e0;">
                    <span class="stat-label">Saldo Kebutuhan (Siap Pakai)</span>
                    <span class="stat-value" id="dashKebutuhan">Rp 0</span>
                </div>
            </div>
        </div>

        <div id="page1" class="page">
            <div class="card">
                <h3>üöó Input Order</h3>
                <input type="text" id="namaPelanggan" placeholder="Nama Pelanggan">
                <input type="number" id="jarak" placeholder="Jarak (km)">
                <button onclick="hitungOngkos()">Simpan Order</button>
            </div>
        </div>

        <div id="page2" class="page">
            <div class="card">
                <h3>üí∞ Kelola Keuangan</h3>
                <input type="number" id="pendapatanLain" placeholder="Pendapatan Tambahan (Rp)">
                <button style="background: var(--success)" onclick="tambahPendapatanLain()">Tambah Pendapatan</button>
                <hr>
                <input type="number" id="pengeluaranHari" placeholder="Pengeluaran Harian (Rp)">
                <button style="background: var(--danger)" onclick="catatPengeluaran()">Catat Pengeluaran</button>
            </div>
            
            <div class="card">
                <h3>üìä Alokasi Saat Ini</h3>
                <p>Kebutuhan: <b id="textKebutuhan">0</b></p>
                <p>Tabungan: <b id="textTabungan">0</b></p>
                <p>Perawatan (20%): <b id="textPerawatan">0</b></p>
            </div>
        </div>

        <div id="page3" class="page">
            <div class="card" style="text-align: center;">
                <h3>üè¶ Brankas Tabungan</h3>
                <h1 id="totalTabunganBesar">Rp 0</h1>
                <p>Data ini otomatis bertambah dari 30% setiap orderan/pendapatan yang masuk.</p>
                <button onclick="logout()" style="background:#666">Keluar Aplikasi</button>
            </div>
        </div>
    </div>

    <div class="navbar">
        <button onclick="showPage(0, this)" class="active">Home</button>
        <button onclick="showPage(1, this)">Order</button>
        <button onclick="showPage(2, this)">Keuangan</button>
        <button onclick="showPage(3, this)">Tabungan</button>
    </div>
</div>

<script>
    let currentUser = "";
    let userData = {};

    function login() {
        let user = document.getElementById('userInput').value;
        let pass = document.getElementById('passInput').value;
        if(!user || !pass) return alert("Isi User & Password");

        currentUser = user;
        let stored = JSON.parse(localStorage.getItem("ojol_user_" + user));
        
        if(stored) {
            if(stored.pass !== pass) return alert("Password Salah!");
            userData = stored;
        } else {
            userData = {
                pass: pass,
                pendapatan: [],
                saldoKebutuhan: 0,
                saldoTabungan: 0,
                saldoPerawatan: 0
            };
            saveData();
        }

        document.getElementById('loginPage').style.display = 'none';
        document.getElementById('mainApp').style.display = 'block';
        document.getElementById('welcomeUser').innerText = "Halo, " + user.toUpperCase();
        updateUI();
    }

    function saveData() {
        localStorage.setItem("ojol_user_" + currentUser, JSON.stringify(userData)); 
    }

    function showPage(num, btn) {
        document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
        document.querySelectorAll(".navbar button").forEach(b => b.classList.remove("active"));
        document.getElementById("page" + num).classList.add("active");
        btn.classList.add("active");
        updateUI();
    }

    function hitungOngkos() {
        let jarak = parseFloat(document.getElementById("jarak").value);
        if(isNaN(jarak)) return;
        let total = (jarak <= 2) ? 5000 : 5000 + ((jarak - 2) * 2000);
        
        prosesMasukUang(total);
        alert("Order Berhasil: Rp " + total.toLocaleString());
        document.getElementById("jarak").value = "";
    }

    function tambahPendapatanLain() {
        let nominal = parseFloat(document.getElementById("pendapatanLain").value);
        if(isNaN(nominal)) return;
        prosesMasukUang(nominal);
        document.getElementById("pendapatanLain").value = "";
    }

    function prosesMasukUang(nominal) {
        userData.saldoKebutuhan += (nominal * 0.5); 
        userData.saldoTabungan += (nominal * 0.3); 
        userData.saldoPerawatan += (nominal * 0.2); 
        userData.pendapatan.push({tgl: new Date().toLocaleDateString(), total: nominal}); 
        saveData();
        updateUI();
    }

    function catatPengeluaran() {
        let nominal = parseFloat(document.getElementById("pengeluaranHari").value);
        if(isNaN(nominal)) return;
        if(nominal > userData.saldoKebutuhan) return alert("Saldo Kebutuhan Tidak Cukup!");
        
        userData.saldoKebutuhan -= nominal;
        saveData();
        updateUI();
        document.getElementById("pengeluaranHari").value = "";
    }

    function updateUI() {
        let hariIni = new Date().toLocaleDateString();
        let totalHariIni = userData.pendapatan
            .filter(d => d.tgl === hariIni)
            .reduce((sum, item) => sum + item.total, 0); 

        // Dashboard
        document.getElementById("dashHarian").innerText = "Rp " + totalHariIni.toLocaleString(); 
        document.getElementById("dashTabungan").innerText = "Rp " + userData.saldoTabungan.toLocaleString();
        document.getElementById("dashKebutuhan").innerText = "Rp " + userData.saldoKebutuhan.toLocaleString();

        // Keuangan Page
        document.getElementById("textKebutuhan").innerText = "Rp " + userData.saldoKebutuhan.toLocaleString();
        document.getElementById("textTabungan").innerText = "Rp " + userData.saldoTabungan.toLocaleString();
        document.getElementById("textPerawatan").innerText = "Rp " + userData.saldoPerawatan.toLocaleString();

        // Tabungan Page
        document.getElementById("totalTabunganBesar").innerText = "Rp " + userData.saldoTabungan.toLocaleString();
    }

    function logout() {
        location.reload();
    }
</script>

</body>
</html>
